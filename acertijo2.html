<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Sopa de Letras - Acertijo</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #b3e5fc, #81d4fa);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 30px;
    }

    h2 {
      text-align: center;
      margin-bottom: 20px;
      color: #004d60;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(10, 40px);
      grid-template-rows: repeat(10, 40px);
      gap: 2px;
      margin-bottom: 30px;
    }

    .cell {
      background-color: #ffffff;
      border: 1px solid #ccc;
      text-align: center;
      line-height: 40px;
      font-weight: bold;
      font-size: 18px;
      user-select: none;
      cursor: pointer;
    }

    .cell.selected {
      background-color: #b2ebf2;
    }

    .cell.found {
      background-color: #00acc1;
      color: white;
    }

    .code-input {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    input[type="text"] {
      padding: 10px;
      font-size: 16px;
      width: 250px;
      border-radius: 8px;
      border: 1px solid #888;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      background-color: #00acc1;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    button:hover {
      background-color: #00838f;
    }
  </style>
</head>
<body>

  <h2>Debes encontrar palabras dentro de esta sopa de letras. Las palabras que encuentres tienen una correlación entre ellas.</h2>

  <div class="grid" id="sopa"></div>

  <div class="code-input">
    <input type="text" id="codigo" placeholder="Introduce el código">
    <button onclick="verificarCodigo()">Entrar</button>
  </div>

  <script>
    const palabras = ["DEXTER", "ANGEL", "BATISTA", "RELACIONES"];
    const correctCode = "LA PASION"; // Cambia este valor por el código correcto
    const gridSize = 10;

    let grid = Array.from({ length: gridSize }, () => Array(gridSize).fill(''));

    function colocarPalabra(palabra, fila, col, horizontal = true) {
      for (let i = 0; i < palabra.length; i++) {
        if (horizontal) {
          grid[fila][col + i] = palabra[i];
        } else {
          grid[fila + i][col] = palabra[i];
        }
      }
    }

    // Colocar palabras en posiciones fijas
    colocarPalabra("DEXTER", 0, 0, true);
    colocarPalabra("ANGEL", 2, 2, true);
    colocarPalabra("LAPASION", 4, 1, true);
    colocarPalabra("RELACIONES", 6, 0, true);

    // Rellenar espacios vacíos con letras aleatorias
    const letras = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    for (let fila = 0; fila < gridSize; fila++) {
      for (let col = 0; col < gridSize; col++) {
        if (grid[fila][col] === '') {
          grid[fila][col] = letras[Math.floor(Math.random() * letras.length)];
        }
      }
    }

    const gridContainer = document.getElementById("sopa");

    grid.forEach((fila, i) => {
      fila.forEach((letra, j) => {
        const cell = document.createElement("div");
        cell.classList.add("cell");
        cell.textContent = letra;
        cell.dataset.fila = i;
        cell.dataset.col = j;
        gridContainer.appendChild(cell);
      });
    });

    let seleccion = [];

    document.querySelectorAll(".cell").forEach(cell => {
      cell.addEventListener("click", () => {
        cell.classList.toggle("selected");

        const letra = cell.textContent;
        const fila = parseInt(cell.dataset.fila);
        const col = parseInt(cell.dataset.col);

        const id = fila + "-" + col;

        if (seleccion.some(sel => sel.id === id)) {
          seleccion = seleccion.filter(sel => sel.id !== id);
        } else {
          seleccion.push({ letra, id });
        }

        const palabraSeleccionada = seleccion.map(s => s.letra).join("");

        if (palabras.includes(palabraSeleccionada)) {
          seleccion.forEach(s => {
            const celda = document.querySelector(`[data-fila="${s.id.split('-')[0]}"][data-col="${s.id.split('-')[1]}"]`);
            celda.classList.remove("selected");
            celda.classList.add("found");
          });
          seleccion = [];
        }
      });
    });

    function verificarCodigo() {
      const entrada = document.getElementById("codigo").value.trim();
      if (entrada === correctCode) {
        window.location.href = "menu.html";
      } else {
        alert("Código incorrecto. Intenta de nuevo.");
      }
    }
  </script>

</body>
</html>
